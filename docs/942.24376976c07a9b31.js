"use strict";(self.webpackChunkgatitobook=self.webpackChunkgatitobook||[]).push([[942],{5942:(R,v,u)=>{u.r(v),u.d(v,{HomeModule:()=>P});var C=u(3116),g=u(6019),i=u(7537);function _(o){const t=o.value;return t!==t.toLowerCase()?{minusculo:!0}:null}function F(o){var t,n,r,s;const a=null!==(n=null===(t=o.get("userName"))||void 0===t?void 0:t.value)&&void 0!==n?n:"",m=null!==(s=null===(r=o.get("password"))||void 0===r?void 0:r.value)&&void 0!==s?s:"";return a.trim()+m.trim()?a!==m?null:{senhaIgualUsuario:!0}:null}var e=u(3556),f=u(8260),h=u(4522);const U=f.N.urlAPI;let Z=(()=>{class o{constructor(n){this.httpClient=n}cadastraNovoUsuario(n){return this.httpClient.post(`${U}/user/signup`,n)}verificaUsuarioExistente(n){return this.httpClient.get(`${U}/user/exists/${n}`)}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var T=u(3067),A=u(4753),E=u(6047);let S=(()=>{class o{constructor(n){this.novoUsuarioService=n}usuarioJaExiste(){return n=>n.valueChanges.pipe((0,T.w)(r=>this.novoUsuarioService.verificaUsuarioExistente(r)),(0,A.U)(r=>r?{usuarioExistente:!0}:null),(0,E.P)())}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(Z))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=u(6217),N=u(2847);function I(o,t){1&o&&e._UZ(0,"app-mensagem",15)}function y(o,t){1&o&&e._UZ(0,"app-mensagem",16)}function J(o,t){1&o&&e._UZ(0,"app-mensagem",17)}function b(o,t){1&o&&e._UZ(0,"app-mensagem",18)}function x(o,t){1&o&&e._UZ(0,"app-mensagem",19)}function L(o,t){1&o&&e._UZ(0,"app-mensagem",20)}function M(o,t){1&o&&e._UZ(0,"app-mensagem",21)}const Y=function(){return[""]};let q=(()=>{class o{constructor(n,r,s,a){this.formBuilder=n,this.novoUsuarioService=r,this.usuarioExistenteService=s,this.router=a}ngOnInit(){this.novoUsuarioForm=this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],fullName:["",[i.kI.required,i.kI.minLength(4)]],userName:["",[_],[this.usuarioExistenteService.usuarioJaExiste()]],password:[""]},{validators:[F]})}cadastrar(){if(this.novoUsuarioForm.valid){const n=this.novoUsuarioForm.getRawValue();this.novoUsuarioService.cadastraNovoUsuario(n).subscribe(()=>this.router.navigate([""]),r=>console.log(r))}}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(i.qu),e.Y36(Z),e.Y36(S),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-novo-usuario"]],decls:24,vars:10,consts:[[1,"form","mt-4",3,"formGroup","submit"],[1,"form-group"],["type","text","placeholder","E-mail","formControlName","email","required","",1,"form-control"],["mensagem","E-mail obrigat\xf3rio",4,"ngIf"],["mensagem","E-mail inv\xe1lido",4,"ngIf"],["type","text","placeholder","Nome completo","formControlName","fullName",1,"form-control"],["type","text","placeholder","Usu\xe1rio","formControlName","userName","required","",1,"form-control"],["mensagem","Usu\xe1rio deve ser em letras min\xfasculas",4,"ngIf"],["mensagem","Usu\xe1rio obrigat\xf3rio",4,"ngIf"],["mensagem","Usu\xe1rio j\xe1 existe",4,"ngIf"],["type","password","placeholder","Senha","formControlName","password","required","",1,"form-control"],["mensagem","Senha obrigat\xf3ria",4,"ngIf"],["mensagem","Senha deve ser diferente do nome de usu\xe1rio",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block"],[3,"routerLink"],["mensagem","E-mail obrigat\xf3rio"],["mensagem","E-mail inv\xe1lido"],["mensagem","Usu\xe1rio deve ser em letras min\xfasculas"],["mensagem","Usu\xe1rio obrigat\xf3rio"],["mensagem","Usu\xe1rio j\xe1 existe"],["mensagem","Senha obrigat\xf3ria"],["mensagem","Senha deve ser diferente do nome de usu\xe1rio"]],template:function(n,r){if(1&n&&(e.TgZ(0,"h4"),e._uU(1,"Registre-se e mostre seu pet ao mundo!"),e.qZA(),e.TgZ(2,"form",0),e.NdJ("submit",function(){return r.cadastrar()}),e.TgZ(3,"div",1),e._UZ(4,"input",2),e.YNc(5,I,1,0,"app-mensagem",3),e.YNc(6,y,1,0,"app-mensagem",4),e.qZA(),e.TgZ(7,"div",1),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",1),e._UZ(10,"input",6),e.YNc(11,J,1,0,"app-mensagem",7),e.YNc(12,b,1,0,"app-mensagem",8),e.YNc(13,x,1,0,"app-mensagem",9),e.qZA(),e.TgZ(14,"div",1),e._UZ(15,"input",10),e.YNc(16,L,1,0,"app-mensagem",11),e.YNc(17,M,1,0,"app-mensagem",12),e.qZA(),e.TgZ(18,"button",13),e._uU(19,"Cadastrar"),e.qZA(),e.qZA(),e.TgZ(20,"p"),e._uU(21," J\xe1 \xe9 cadastrado? "),e.TgZ(22,"a",14),e._uU(23,"Fa\xe7a Login"),e.qZA(),e.qZA()),2&n){let s,a,m,p,d,c;e.xp6(2),e.Q6J("formGroup",r.novoUsuarioForm),e.xp6(3),e.Q6J("ngIf",(null==(s=r.novoUsuarioForm.get("email"))||null==s.errors?null:s.errors.required)&&(null==(s=r.novoUsuarioForm.get("email"))?null:s.touched)),e.xp6(1),e.Q6J("ngIf",(null==(a=r.novoUsuarioForm.get("email"))||null==a.errors?null:a.errors.email)&&(null==(a=r.novoUsuarioForm.get("email"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",(null==(m=r.novoUsuarioForm.get("userName"))||null==m.errors?null:m.errors.minusculo)&&(null==(m=r.novoUsuarioForm.get("userName"))?null:m.touched)),e.xp6(1),e.Q6J("ngIf",(null==(p=r.novoUsuarioForm.get("userName"))||null==p.errors?null:p.errors.required)&&(null==(p=r.novoUsuarioForm.get("userName"))?null:p.touched)),e.xp6(1),e.Q6J("ngIf",null==(d=r.novoUsuarioForm.get("userName"))||null==d.errors?null:d.errors.usuarioExistente),e.xp6(3),e.Q6J("ngIf",(null==(c=r.novoUsuarioForm.get("password"))||null==c.errors?null:c.errors.required)&&(null==(c=r.novoUsuarioForm.get("password"))?null:c.touched)),e.xp6(1),e.Q6J("ngIf",null==r.novoUsuarioForm.errors?null:r.novoUsuarioForm.errors.senhaIgualUsuario),e.xp6(5),e.Q6J("routerLink",e.DdM(9,Y))}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.Q7,g.O5,l.yS,N.c],styles:[""]}),o})();var Q=u(7384),H=u(5400);const w=f.N.urlAPI;let k=(()=>{class o{constructor(n,r){this.httpClient=n,this.usuarioService=r}autentica(n,r){return this.httpClient.post(`${w}/user/login`,{userName:n,password:r},{observe:"response"}).pipe((0,Q.b)(s=>{var a;const m=null!==(a=s.headers.get("x-access-token"))&&void 0!==a?a:"";this.usuarioService.salvaToken(m)}))}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(h.eN),e.LFG(H.i))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function j(o,t){1&o&&e._UZ(0,"app-mensagem",12)}function z(o,t){1&o&&e._UZ(0,"app-mensagem",13)}const B=function(){return["novousuario"]},G=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-6","mb-2"],["src","assets/img/home.jpg","alt","Gato cinza",1,"img-fluid","d-none","d-sm-block"],[1,"col-md-6"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"router-outlet"),e.qZA(),e.qZA(),e.qZA())},directives:[l.lC],styles:[""]}),o})(),children:[{path:"",component:(()=>{class o{constructor(n,r){this.authService=n,this.router=r,this.usuario="",this.senha=""}ngOnInit(){}login(){this.authService.autentica(this.usuario,this.senha).subscribe(()=>{this.router.navigate(["animais"])},n=>{console.log(n),alert("Usu\xe1rio ou senha inv\xe1lidos!")})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(k),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:18,vars:7,consts:[[1,"text-center"],[1,"form","mt-4",3,"ngSubmit"],["formulario","ngForm"],[1,"form-group"],["placeholder","Nome do usu\xe1rio","type","text","name","usuario","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoUsuario","ngModel"],["mensagem","Usu\xe1rio obrigat\xf3rio",4,"ngIf"],["placeholder","Senha","type","password","name","senha","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoSenha","ngModel"],["mensagem","Senha obrigat\xf3ria",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"underlineHover",3,"routerLink"],["mensagem","Usu\xe1rio obrigat\xf3rio"],["mensagem","Senha obrigat\xf3ria"]],template:function(n,r){if(1&n&&(e.TgZ(0,"h4",0),e._uU(1,"Login"),e.qZA(),e.TgZ(2,"form",1,2),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(4,"div",3),e.TgZ(5,"input",4,5),e.NdJ("ngModelChange",function(a){return r.usuario=a}),e.qZA(),e.YNc(7,j,1,0,"app-mensagem",6),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"input",7,8),e.NdJ("ngModelChange",function(a){return r.senha=a}),e.qZA(),e.YNc(11,z,1,0,"app-mensagem",9),e.qZA(),e.TgZ(12,"button",10),e._uU(13," Login "),e.qZA(),e.qZA(),e.TgZ(14,"p"),e._uU(15," N\xe3o tem uma conta? "),e.TgZ(16,"a",11),e._uU(17,"Cadastre-se!"),e.qZA(),e.qZA()),2&n){const s=e.MAs(3),a=e.MAs(6),m=e.MAs(10);e.xp6(5),e.Q6J("ngModel",r.usuario),e.xp6(2),e.Q6J("ngIf",a.invalid&&a.touched),e.xp6(2),e.Q6J("ngModel",r.senha),e.xp6(2),e.Q6J("ngIf",m.invalid&&m.touched),e.xp6(1),e.Q6J("disabled",s.invalid),e.xp6(4),e.Q6J("routerLink",e.DdM(6,B))}},directives:[i._Y,i.JL,i.F,i.Fj,i.Q7,i.JJ,i.On,g.O5,l.yS,N.c],styles:[""]}),o})()},{path:"novousuario",component:q}]}];let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.Bz.forChild(G)],l.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,O,i.u5,C.m]]}),o})()}}]);